<div class="min-h-screen bg-white flex">
  <div class="flex-1 flex flex-col justify-center px-8 sm:px-12 md:px-24 lg:px-32 xl:px-48">

    <div class="mb-10 flex items-center gap-2">
      <div
        class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-indigo-200">
        <i class="fas fa-shield-halved text-xl"></i>
      </div>
      <span class="text-xl font-bold text-slate-900 tracking-tight">ChatStream Security</span>
    </div>

    <div class="max-w-md w-full">
      <h2 class="text-3xl font-bold text-slate-900 mb-2">Change Password</h2>
      <p class="text-slate-500 mb-8">Set a strong password to protect your account from unauthorized access.</p>

      <form #changePasswordForm="ngForm" class="space-y-5" (ngSubmit)="onSubmit()">

        <div *ngIf="_notificationService.message$ | async as message">
          <chat-notification [message]="message"/>
        </div>

        <div class="space-y-1">
          <label class="text-sm font-semibold text-slate-700">Account Email</label>
          <div class="relative group">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400">
              <i class="fas fa-envelope"></i>
            </span>
            <input name="email" [(ngModel)]="pwdData.email" readonly
                   class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-400 cursor-not-allowed outline-none"/>
          </div>
        </div>

        <div class="space-y-1">
          <label class="text-sm font-semibold text-slate-700">Current Password</label>
          <div class="relative group">
            <span
              class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400 group-focus-within:text-indigo-600">
              <i class="fas fa-lock"></i>
            </span>
            <input [type]="showOldPwd ? 'text' : 'password'" name="oldPassword" required
                   [(ngModel)]="pwdData.oldPassword"
                   #oldPassword="ngModel"
                   class="w-full pl-10 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all"/>
            <button type="button" (click)="showOldPwd = !showOldPwd"
                    class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-indigo-600">
              <i class="fas" [ngClass]="showOldPwd ? 'fa-eye-slash' : 'fa-eye'"></i>
            </button>
          </div>
          <chat-form-error [control]="oldPassword"/>
        </div>

        <hr class="border-slate-100 my-2">

        <div class="space-y-1">
          <label class="text-sm font-semibold text-slate-700">New Password</label>
          <div class="relative group">
            <span
              class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400 group-focus-within:text-indigo-600">
              <i class="fas fa-key"></i>
            </span>
            <input [type]="showNewPwd ? 'text' : 'password'" name="newPassword" required
                   [(ngModel)]="pwdData.newPassword"
                   #newPassword="ngModel"
                   chatPasswordValidator
                   chatCurrentPasswordMatchValidator="oldPassword"
                   class="w-full pl-10 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all"/>
            <button type="button" (click)="showNewPwd = !showNewPwd"
                    class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-indigo-600">
              <i class="fas" [ngClass]="showNewPwd ? 'fa-eye-slash' : 'fa-eye'"></i>
            </button>
          </div>
          <div class="flex gap-1 mt-2">
            <div class="h-1 flex-1 rounded-full transition-colors"
                 [ngClass]="getStrength() >= 1 ? 'bg-red-400' : 'bg-slate-200'"></div>
            <div class="h-1 flex-1 rounded-full transition-colors"
                 [ngClass]="getStrength() >= 2 ? 'bg-orange-400' : 'bg-slate-200'"></div>
            <div class="h-1 flex-1 rounded-full transition-colors"
                 [ngClass]="getStrength() >= 3 ? 'bg-yellow-400' : 'bg-slate-200'"></div>
            <div class="h-1 flex-1 rounded-full transition-colors"
                 [ngClass]="getStrength() >= 4 ? 'bg-green-500' : 'bg-slate-200'"></div>
          </div>

          <div class="mt-1">
            <chat-form-error [control]="newPassword"/>
          </div>
        </div>

        <div class="space-y-1">
          <label class="text-sm font-semibold text-slate-700">Confirm New Password</label>
          <div class="relative group">
            <span
              class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400 group-focus-within:text-indigo-600">
              <i class="fas fa-check-double"></i>
            </span>
            <input type="password" name="confirmPassword" required
                   [(ngModel)]="pwdData.confirmPassword"
                   #confirmPassword="ngModel"
                   class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all"
                   chatPasswordMatchValidator="newPassword"
            />
          </div>
          <chat-form-error [control]="confirmPassword"/>
        </div>

        <button type="submit"
                class="w-full py-4 bg-slate-900 hover:bg-black text-white font-bold rounded-xl shadow-lg shadow-slate-200 transition-all flex items-center justify-center gap-2 disabled:opacity-50 mt-4">
          <i *ngIf="isLoading" class="fas fa-circle-notch fa-spin"></i>
          {{ isLoading ? 'Updating Security...' : 'Update Password' }}
          <i *ngIf="!isLoading" class="fas fa-arrow-right ml-2 text-sm opacity-50"></i>
        </button>
      </form>
    </div>
  </div>

  <div class="hidden lg:flex flex-1 bg-slate-50 items-center justify-center p-12">
    <div class="max-w-sm w-full space-y-8">
      <div class="bg-white p-8 rounded-3xl shadow-md border border-slate-100 transform">
        <div class="flex items-center gap-4 mb-6">
          <div class="w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white">
            <i class="fas fa-fingerprint text-2xl"></i>
          </div>
          <div>
            <div class="h-4 w-24 bg-slate-100 rounded mb-2"></div>
            <div class="h-3 w-16 bg-slate-50 rounded"></div>
          </div>
        </div>
        <div class="space-y-3">
          <div class="h-2 w-full bg-slate-100 rounded"></div>
          <div class="h-2 w-full bg-slate-100 rounded"></div>
          <div class="h-2 w-2/3 bg-slate-50 rounded"></div>
        </div>
      </div>

      <div class="text-center px-4">
        <h3 class="text-2xl font-bold text-slate-900">Security First</h3>
        <p class="text-slate-500 mt-2 leading-relaxed">We use industry-standard encryption to ensure your data remains
          your data.</p>
      </div>
    </div>
  </div>
</div>
